name: github-workflow
on: push

jobs:
  setup:
    runs-on: ubuntu-latest
    steps:
      - name: checkout out current code using public action
        uses: actions/checkout@v2
      - name: Use Node.js
        uses: actions/setup-node@v1
      - name: Use git actions
        uses: srt32/git-actions@v0.0.3

  build:
    needs: setup
    runs-on: ubuntu-latest
    steps:
      - name: test
        run: ls -a
      - name: run build
        run: |
          commit=$(git rev-parse --short=8 HEAD)
          export GIT_COMMIT="$commit"
          export SENTRY_DSN="https://e6839d71823a4f06af00108cf7dcd6c9@o485829.ingest.sentry.io/5541712"
          npm i -g parcel
          npm install
          npm run build
